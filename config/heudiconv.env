# HeuDiConv pipeline config (sourced by bash)

# ---- raw input root ----
SRC_ROOT="${PROJECT_ROOT}/Data/fmriData"

# ---- staging outputs ----
STAGE_ROOT="${STAGE_ROOT:-${PROJECT_ROOT}/stage}"
STAGE_DICOM="${STAGE_ROOT}/dicom"
MANIFEST="${STAGE_ROOT}/manifest.tsv"
DUPLICATES="${STAGE_ROOT}/duplicates.tsv"

CLEAN_STAGE_DICOM="${CLEAN_STAGE_DICOM:-1}"
STOP_ON_DUPLICATES="${STOP_ON_DUPLICATES:-0}"
OVERRIDES_TSV="${OVERRIDES_TSV:-${STAGE_ROOT}/overrides.tsv}"

# ---- BIDS outputs ----
BIDS_ROOT="${BIDS_ROOT:-${PROJECT_ROOT}/bids}"
LOGDIR="${PROJECT_ROOT}/logs/heudiconv"

# ---- state files (DONE/FAILED/RUNNING/LOCK) ----
STATE_DIR="${LOGDIR}/state"
DONE_DIR="${STATE_DIR}/done"
FAILED_DIR="${STATE_DIR}/failed"
RUNNING_DIR="${STATE_DIR}/running"
LOCK_DIR="${STATE_DIR}/lock"

# ---- heuristic ----
HEURISTIC="${PIPELINES_ROOT}/heudiconv/heuristic/heuristic.py"

# ---- container ----
SIF="${CONTAINERS_ROOT}/heudiconv-1.3.4.sif"

# ---- concurrency ----
MAX_JOBS="${MAX_JOBS:-4}"

# ---- DICOM template ----
DICOM_TEMPLATE="${STAGE_DICOM}/sub-{subject}/ses-{session}/*/*/*"
